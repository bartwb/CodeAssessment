===== CODE ASSESSMENT RAPPORT =====
Datum/tijd (UTC): 2025-12-02 08:33:32

== Kandidaat ==
Id      : demo-123
Naam    : Test Kandidaat
Email   : test@example.com

== Opdracht ==
AssignmentId  : csharp-junior-1
AssignmentName: Bestelbedrag met btw

== Samenvatting ==
Einds score     : 9
AI score        : 9
Compileert      : JA
Alle tests groen: JA

== AI review ==
Score: 9 / 10

Algemene feedback:
The code is well-structured and follows good practices. It correctly calculates the total price including VAT for a list of order lines. The use of exceptions for input validation is appropriate, and the code is clean and readable. However, there are minor improvements that can be made for better robustness and clarity.

Issues:
- Regels 20, Severity: Warning
  Suggestie: Consider using a more descriptive exception message when throwing ArgumentNullException. For example, 'Order lines cannot be null.' This provides more context to the caller.
- Regels 24, Severity: Info
  Suggestie: The check for an empty list is not strictly necessary since the loop will naturally result in a subtotal of 0 if there are no elements. However, keeping it can be useful for early exit and clarity.
- Regels 30, Severity: Info
  Suggestie: Consider logging or handling the case where a null OrderLine is skipped. This could help in debugging if unexpected null values are present in the list.

== Static analysis ==
Analyzer: .NET Code Analysis (Roslyn + analyzers)
Aantal diagnostics: 26

- CA1510 [Warning] @ 20:13
  Use 'ArgumentNullException.ThrowIfNull' instead of explicitly throwing a new exception instance
- RCS1001 [Warning] @ 34:21
  Add braces to if statement (when expression spans over multiple lines)
- RCS1001 [Warning] @ 39:21
  Add braces to if statement (when expression spans over multiple lines)
- RCS1102 [Warning] @ 14:18
  Make class static
- RCS1124 [Warning] @ 46:13
  Inline local variable
- SA1200 [Warning] @ 2:3
  Using directive should appear within a namespace declaration
- SA1200 [Warning] @ 3:3
  Using directive should appear within a namespace declaration
- SA1400 [Warning] @ 50:21
  Element 'Main' should declare an access modifier
- SA1402 [Warning] @ 7:18
  File may only contain a single type
- SA1413 [Warning] @ 55:17
  Use trailing comma in multi-line initializers
- SA1503 [Warning] @ 21:17
  Braces should not be omitted
- SA1503 [Warning] @ 24:17
  Braces should not be omitted
- SA1503 [Warning] @ 31:21
  Braces should not be omitted
- SA1516 [Warning] @ 10:1
  Elements should be separated by blank line
- SA1516 [Warning] @ 11:1
  Elements should be separated by blank line
- SA1517 [Warning] @ 1:1
  Code should not contain blank lines at start of file
- SA1519 [Warning] @ 34:21
  Braces should not be omitted from multi-line child statement
- SA1519 [Warning] @ 39:21
  Braces should not be omitted from multi-line child statement
- SA1600 [Warning] @ 11:24
  Elements should be documented
- SA1600 [Warning] @ 9:23
  Elements should be documented
- SA1600 [Warning] @ 10:20
  Elements should be documented
- SA1600 [Warning] @ 7:18
  Elements should be documented
- SA1600 [Warning] @ 14:18
  Elements should be documented
- SA1600 [Warning] @ 18:31
  Elements should be documented
- SA1633 [Warning] @ 1:1
  The file header is missing or not located at the top of the file.
- SA1649 [Warning] @ 7:18
  File name should match first type name

== Runtime ==
ExitCode         : 0
RunDurationMs    : 199
RunTotalCpuTimeMs: 78
RunAverageCpuPct : 470.4
RunPeakWorkingSet: 0 MB

Fases:
- init
  DurationMs    : 1280
  CpuTimeMs     : -
  PeakWorkingSet: -

- restore
  DurationMs    : 836
  CpuTimeMs     : -
  PeakWorkingSet: -

- build
  DurationMs    : 1505
  CpuTimeMs     : -
  PeakWorkingSet: -

- publish
  DurationMs    : 1127
  CpuTimeMs     : -
  PeakWorkingSet: -

- run
  DurationMs    : 199
  CpuTimeMs     : 78
  PeakWorkingSet: 0 MB
  Samples count : 1
  Samples range : 195 ms → 195 ms

StdOut (snippet):
  Determining projects to restore...
  All projects are up-to-date for restore.


  Determining projects to restore...
  All projects are up-to-date for restore.
  UserApp -> C:\Users\BartvandenHoven\AppData\Local\Temp\run-analyze-6d80fbfdc8a34a13b00ac0c71e6a7d52\UserApp\bin\Release\net10.0\UserApp.dll

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:01.18


  Deter...

== Tests ==
Binary score: GOED
Total       : 6
Passed      : 6
Failed      : 0

Details per test:
- CodeAssessment.Tests.Template.CalculateTotalWithVatTests.EmptyList_ReturnsZero → Passed
- CodeAssessment.Tests.Template.CalculateTotalWithVatTests.NullOrderLine_IsIgnored → Passed
- CodeAssessment.Tests.Template.CalculateTotalWithVatTests.NegativeUnitPrice_ThrowsArgumentException → Passed
- CodeAssessment.Tests.Template.CalculateTotalWithVatTests.MultipleLines_ComputesCorrectTotal → Passed
- CodeAssessment.Tests.Template.CalculateTotalWithVatTests.NullList_ThrowsArgumentNullException → Passed
- CodeAssessment.Tests.Template.CalculateTotalWithVatTests.NegativeOrZeroQuantity_ThrowsArgumentException → Passed

== dotnet test stdout ==
  Determining projects to restore...
C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj : warning NU1603: Tests depends on Microsoft.NET.Test.Sdk (>= 17.10.1) but Microsoft.NET.Test.Sdk 17.10.1 was not found. Microsoft.NET.Test.Sdk 17.11.0 was resolved instead.
  Restored C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj (in 2.43 sec).
  1 of 2 projects are up-to-date for restore.


  Determining projects to restore...
C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj : warning NU1603: Tests depends on Microsoft.NET.Test.Sdk (>= 17.10.1) but Microsoft.NET.Test.Sdk 17.10.1 was not found. Microsoft.NET.Test.Sdk 17.11.0 was resolved instead.
  All projects are up-to-date for restore.
C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj : warning NU1603: Tests depends on Microsoft.NET.Test.Sdk (>= 17.10.1) but Microsoft.NET.Test.Sdk 17.10.1 was not found. Microsoft.NET.Test.Sdk 17.11.0 was resolved instead.
  AssesmentSolution -> C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\AssesmentSolution\bin\Release\net10.0\AssesmentSolution.dll
C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Test.cs(84,43): warning CS8632: The annotation for nullable reference types should only be used in code within a '#nullable' annotations context. [C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj]
  Tests -> C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\bin\Release\net10.0\Tests.dll

Build succeeded.

C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj : warning NU1603: Tests depends on Microsoft.NET.Test.Sdk (>= 17.10.1) but Microsoft.NET.Test.Sdk 17.10.1 was not found. Microsoft.NET.Test.Sdk 17.11.0 was resolved instead.
C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj : warning NU1603: Tests depends on Microsoft.NET.Test.Sdk (>= 17.10.1) but Microsoft.NET.Test.Sdk 17.10.1 was not found. Microsoft.NET.Test.Sdk 17.11.0 was resolved instead.
C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Test.cs(84,43): warning CS8632: The annotation for nullable reference types should only be used in code within a '#nullable' annotations context. [C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj]
    3 Warning(s)
    0 Error(s)

Time Elapsed 00:00:04.74


  Determining projects to restore...
C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj : warning NU1603: Tests depends on Microsoft.NET.Test.Sdk (>= 17.10.1) but Microsoft.NET.Test.Sdk 17.10.1 was not found. Microsoft.NET.Test.Sdk 17.11.0 was resolved instead.
  All projects are up-to-date for restore.
C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\Tests.csproj : warning NU1603: Tests depends on Microsoft.NET.Test.Sdk (>= 17.10.1) but Microsoft.NET.Test.Sdk 17.10.1 was not found. Microsoft.NET.Test.Sdk 17.11.0 was resolved instead.
  AssesmentSolution -> C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\AssesmentSolution\bin\Release\net10.0\AssesmentSolution.dll
  Tests -> C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\bin\Release\net10.0\Tests.dll
Test run for C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\bin\Release\net10.0\Tests.dll (.NETCoreApp,Version=v10.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
Results File: C:\Users\BartvandenHoven\AppData\Local\Temp\run-780654977e2b416a9358746991914c9b\Tests\TestResults\results.trx

Passed!  - Failed:     0, Passed:     6, Skipped:     0, Total:     6, Duration: 414 ms - Tests.dll (net10.0)


== Ingezonden code ==

  using System;
  using System.Collections.Generic;

  namespace Assessment.Junior
  {
    public class OrderLine
    {
        public string ProductName { get; set; } = string.Empty;
        public int Quantity { get; set; }
        public decimal UnitPrice { get; set; }
    }

    public class Program
    {
        private const decimal VatRate = 0.21m;

        public static decimal CalculateTotalWithVat(List<OrderLine> lines)
        {
            if (lines == null)
                throw new ArgumentNullException(nameof(lines));

            if (lines.Count == 0)
                return 0m;

            decimal subtotal = 0m;

            foreach (var line in lines)
            {
                if (line == null)
                    continue; // defensive: sla null-regels over

                if (line.Quantity <= 0)
                    throw new ArgumentException(
                        $"Quantity must be > 0 for product '{line.ProductName}'.",
                        nameof(lines));

                if (line.UnitPrice < 0)
                    throw new ArgumentException(
                        $"UnitPrice must be >= 0 for product '{line.ProductName}'.",
                        nameof(lines));

                subtotal += line.Quantity * line.UnitPrice;
            }

            decimal total = subtotal * (1m + VatRate);
            return total;
        }

        static void Main()
        {
            var lines = new List<OrderLine>
            {
                new OrderLine { ProductName = "C# in Depth", Quantity = 2, UnitPrice = 39.95m },
                new OrderLine { ProductName = "Clean Code", Quantity = 1, UnitPrice = 34.50m }
            };

            var total = CalculateTotalWithVat(lines);

            Console.WriteLine($"Totaal incl. btw: {total:0.00} EUR");
        }
    }
  }
